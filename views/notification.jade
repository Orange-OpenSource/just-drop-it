//
 just-drop-it
 Copyright (C) 2016 Orange
 Authors: Benjamin Einaudi  benjamin.einaudi@orange.com
          Arnaud Ruffin arnaud.ruffin@orange.com

 This file is part of just-drop-it.

 just-drop-it is free software; you can redistribute it and/or
 modify it under the terms of the GNU General Public License
 as published by the Free Software Foundation; either version 2
 of the License, or (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with just-drop-it.  If not, see <http://www.gnu.org/licenses/>.

if isLocal
    script(src="/js/jdropit-notif.js")
else
    script(src="/js/jdropit-notif.min.js")
script.
    function enableNotifications() {
        if (jdNotif.isAlreadyGranted()) {
            jdNotif.notify("Great!", "Notifications are enabled");
        } else if(jdNotif.isNotificationAvailable()){
            var container = $(".notification-header").first();
            var dismiss = container.children(".dismiss-notification").first();
            container.show();
            dismiss.on('click', function (event) {
                event.stopPropagation();
                container.hide();
            });
            container.on("click", function () {
                jdNotif.askPermission(function () {
                    container.hide();
                    jdNotif.notify("Great!", "Notifications are enabled");
                });
            });
        }
    }
div(class="notification-header" hidden="hidden") Just-drop-it needs your permission to&nbsp;
        a enable desktop notifications
        a.dismiss-notification
            span(class="glyphicon glyphicon-remove")